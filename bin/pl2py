#!/usr/bin/perl

use strict;

$_ = do { local $/; <> };

s/sub (\w+) {/def $1():/;
while (s/^\s+my\s+\$(\w+)\s+=\s+shift;\s*\n+//m) {
    my $var = $1;
    s/(def \w+\()\):/$1$var):/ or
    s/(def \w+\(.*)\):/$1, $var):/;
}

s/^\s+\}\n//mg;
s/;\s*$//mg;
s/\$(\w+)/$1/g;
s/->/./g;
s/return 1/return True/g;
s/return 0/return False/g;
s/\((.*)\) \{/$1:/g;
s/\s+\{\s*$/:/mg;
s/\.can\(/.__getattr__(/g;
s/^\s*my\s+//mg;

print $_;
